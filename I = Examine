-- Define the NPC object
NPC = {
    name = "Explorer",  -- NPC's name
    position = {x = 5, y = 5},  -- Current position
    perception = 8,  -- Perception level determines how much detail the NPC can observe
}

-- Define an object to be examined
object_to_examine = {
    name = "Ancient Artifact",
    position = {x = 6, y = 5},
    description = "A mysterious artifact with ancient runes.",
    details = {
        "The runes seem to be of a forgotten language.",
        "The artifact emits a faint, eerie glow.",
        "It feels oddly warm to the touch."
    }
}

-- Function to calculate the distance between the NPC and the object
function calculate_distance(point1, point2)
    local dx = point2.x - point1.x
    local dy = point2.y - point1.y
    return math.sqrt(dx * dx + dy * dy)
end

-- Examine action function
function examine_action()
    -- Calculate the distance to the object
    local distance_to_object = calculate_distance(NPC.position, object_to_examine.position)

    -- Check if the NPC is close enough to examine the object
    if distance_to_object <= 1 then
        -- Print the basic description of the object
        print(NPC.name .. " examines the " .. object_to_examine.name .. ".")
        print("Description: " .. object_to_examine.description)

        -- Determine how many details the NPC can observe based on perception
        local observed_details_count = math.min(#object_to_examine.details, NPC.perception)

        -- Print the observed details
        for i = 1, observed_details_count do
            print("Detail " .. i .. ": " .. object_to_examine.details[i])
        end
    else
        -- If the NPC is too far away, print a message
        print(object_to_examine.name .. " is too far away to examine.")
    end
end

-- Example usage:
-- Execute the examine action
examine_action()
