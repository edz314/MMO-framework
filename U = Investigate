-- Define the NPC object
NPC = {
    name = "Detective",  -- NPC's name
    position = {x = 5, y = 5},  -- Current position
    speed = 2,  -- Movement speed (units per second)
    investigation_range = 10,  -- Range within which the NPC can investigate an event
}

-- Define an event or point of interest to be investigated
event_to_investigate = {
    name = "Strange Noise",
    position = {x = 10, y = 10},
    description = "A faint noise can be heard, but the source is unclear.",
    is_investigated = false,  -- Initial state of the event (not yet investigated)
}

-- Function to calculate the distance between two points
function calculate_distance(point1, point2)
    local dx = point2.x - point1.x
    local dy = point2.y - point1.y
    return math.sqrt(dx * dx + dy * dy)
end

-- Function to calculate the direction vector towards a target point
function calculate_direction(current_position, target_position)
    local dx = target_position.x - current_position.x
    local dy = target_position.y - current_position.y
    local distance = calculate_distance(current_position, target_position)
    return {x = dx / distance, y = dy / distance}
end

-- Investigate action function
function investigate_action(target_event)
    -- Calculate the distance to the event
    local distance_to_event = calculate_distance(NPC.position, target_event.position)

    -- Check if the event is within investigation range
    if distance_to_event <= NPC.investigation_range then
        -- Move towards the event
        local direction = calculate_direction(NPC.position, target_event.position)
        NPC.position.x = NPC.position.x + direction.x * NPC.speed
        NPC.position.y = NPC.position.y + direction.y * NPC.speed
        print(NPC.name .. " is moving towards the " .. target_event.name .. " at position (" .. target_event.position.x .. ", " .. target_event.position.y .. ").")

        -- Check if the NPC has reached the event
        distance_to_event = calculate_distance(NPC.position, target_event.position)
        if distance_to_event <= NPC.speed then
            target_event.is_investigated = true
            print(NPC.name .. " has reached the " .. target_event.name .. " and is investigating: " .. target_event.description)
        end
    else
