-- Define the NPC object
NPC = {
    name = "Scout",  -- NPC's name
    speed = 2,  -- Units per second
    position = {x = 0, y = 0},  -- Current position
    scout_range = 10,  -- Distance the NPC will scout
    points_of_interest = {},  -- List of points of interest found
    has_reported = false,  -- Indicates if the NPC has reported its findings
}

-- Define a few potential points of interest in the environment
environment_objects = {
    {name = "Enemy Camp", position = {x = 5, y = 5}},
    {name = "Resource Node", position = {x = 8, y = 2}},
    {name = "Hidden Cave", position = {x = 12, y = 7}},
}

-- Function to calculate the distance between two points
function calculate_distance(point1, point2)
    local dx = point2.x - point1.x
    local dy = point2.y - point1.y
    return math.sqrt(dx * dx + dy * dy)
end

-- Function to check for points of interest within the scout range
function check_for_points_of_interest()
    for _, obj in ipairs(environment_objects) do
        local distance = calculate_distance(NPC.position, obj.position)
        if distance <= NPC.scout_range then
            table.insert(NPC.points_of_interest, obj)
            print(NPC.name .. " found a point of interest: " .. obj.name .. " at position (" .. obj.position.x .. ", " .. obj.position.y .. ")")
        end
    end
end

-- Scout action function
function scout_action()
    -- Move the NPC within its scouting range
    NPC.position.x = NPC.position.x + NPC.speed
    NPC.position.y = NPC.position.y + NPC.speed

    print(NPC.name .. " is scouting the area. Current position: (" .. NPC.position.x .. ", " .. NPC.position.y .. ")")

    -- Check for points of interest within the current area
    check_for_points_of_interest()

    -- After scouting, the NPC can report back
    if not NPC.has_reported and #NPC.points_of_interest > 0 then
        report_findings()
        NPC.has_reported = true
    end
end

-- Function to report findings
function report_findings()
    print(NPC.name .. " is reporting findings...")
    for _, poi in ipairs(NPC.points_of_interest) do
        print("Reported: " .. poi.name .. " at position (" .. poi.position.x .. ", " .. poi.position.y .. ")")
    end
end

-- Example usage:
-- Execute the scout action
scout_action()
