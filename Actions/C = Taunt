-- Define the NPC object
NPC = {
    name = "Warrior",  -- NPC's name for taunt messages
    taunt_message = "Come at me, if you dare!",  -- Default taunt message
    taunt_range = 10,  -- Range within which taunt is effective
    position = {x = 0, y = 0},
    target = nil,
}

-- Function to calculate the distance between NPC and target
function calculate_distance(target_position)
    local dx = target_position.x - NPC.position.x
    local dy = target_position.y - NPC.position.y
    return math.sqrt(dx * dx + dy * dy)
end

-- Taunt action function
function taunt_action()
    -- Check if the NPC has a valid target
    if NPC.target == nil then
        print("No target selected.")
        return
    end

    -- Calculate the distance to the target
    local distance_to_target = calculate_distance(NPC.target.position)

    -- Check if the target is within taunt range
    if distance_to_target <= NPC.taunt_range then
        -- Perform the taunt
        print(NPC.name .. " taunts: \"" .. NPC.taunt_message .. "\"")
        
        -- Optional: Trigger a response from the target (e.g., increase aggression)
        target_enemy.aggression_level = target_enemy.aggression_level + 1
        print("The target's aggression level increased to " .. target_enemy.aggression_level)
    else
        -- If the target is out of range, print a message
        print("Target is out of taunt range.")
    end
end

-- Example usage:
-- Define a target with position and aggression level
target_enemy = {
    position = {x = 5, y = 5},
    aggression_level = 1,  -- Initial aggression level
}

-- Assign the target to the NPC
NPC.target = target_enemy

-- Execute the taunt action
taunt_action()
