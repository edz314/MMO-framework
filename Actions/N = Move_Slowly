-- Define the NPC object
NPC = {
    name = "Thief",  -- NPC's name
    position = {x = 0, y = 0},  -- Current position
    normal_speed = 3,  -- Normal movement speed (units per second)
    slow_speed = 1,  -- Reduced movement speed for moving slowly (units per second)
}

-- Function to calculate the direction vector towards a target point
function calculate_direction(current_position, target_position)
    local dx = target_position.x - current_position.x
    local dy = target_position.y - current_position.y
    local distance = math.sqrt(dx * dx + dy * dy)
    return {x = dx / distance, y = dy / distance}
end

-- Move Slowly action function
function move_slowly_action(target_position)
    -- Calculate the direction vector towards the target
    local direction = calculate_direction(NPC.position, target_position)

    -- Move the NPC towards the target at the reduced speed
    NPC.position.x = NPC.position.x + direction.x * NPC.slow_speed
    NPC.position.y = NPC.position.y + direction.y * NPC.slow_speed

    print(NPC.name .. " is moving slowly towards (" .. target_position.x .. ", " .. target_position.y .. ").")
    print("Current position: (" .. NPC.position.x .. ", " .. NPC.position.y .. ")")
end

-- Example usage:
-- Define a target position for the NPC to move towards
local target_position = {x = 5, y = 5}

-- Execute the move slowly action
move_slowly_action(target_position)
